function tenClick(){return 10==numClick?(numClick=1,!0):(numClick+=1,2==numClick&&setTimeout(function(){1!=numClick&&(numClick=1)},2e3),!1)}function readFile(e){var t=e.target.files,n=t[0],i=new FileReader;i.onload=function(){theme.validate($.parseJSON(this.result))?(theme.update($.parseJSON(this.result)),Alert("Success!","theme updated")):Alert("Error!","invalid theme")},i.readAsText(n)}function customTheme(e){"custom"==$("#theme-selctor").val()?$("#custom-themes").fadeIn():1==e?$("#custom-themes").fadeOut():$("#custom-themes").hide()}function changelogLine(e){var t=new Date(e.date.replace(/-/,"/")),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=n[t.getMonth()],o=t.getUTCDate(),c=t.getFullYear();$("<tr><td><a href='"+e.link+"'>"+e.version+"</a></td><td class='description'>"+e.description+"</td><td>"+i+"-"+o+"-"+c+"</td></tr>").appendTo("table")}function capitalize(e){for(var t=e.split(" "),n=0;n<t.length;n++){var i=t[n].charAt(0).toUpperCase();t[n]=i+t[n].substr(1)}return t.join(" ")}function dialogue(e,t,n){$("<div />").qtip({content:{text:e,title:t},position:{my:"center",at:"center",target:$(window)},show:{ready:!0,modal:{on:!0,blur:!1}},hide:{effect:n},style:{type:"dialogue",classes:"qtip-bootstrap"},events:{render:function(e,t){$("button",t.elements.content).click(function(e){t.hide(e)})},hide:function(e,t){t.destroy()}}})}localStorage.tutorial=!0,$(document).ready(function(){progressJs().start(),$("#theme-selctor").chosen({disable_search_threshold:10}),$.getJSON(chrome.extension.getURL("resources/themes/themes-list.json"),function(e){for(e.sort(theme.sort.reverse),i=0;i<e.length;i++){var t=capitalize(e[i].name).replace(/-/," "),n=e[i].name.toLocaleLowerCase();$('<option class="theme-selctor-option" value="'+n+'">'+t+"&#174;</option>").prependTo("#theme-selctor")}option.defineSelect("#theme-selctor","theme",!0,function(){customTheme("custom"==localStorage.theme?!0:!1)}),progressJs().end()}),option.defineCheck("#dissable-notify-delay","noNotifyDelay",!0),option.defineCheck("#only-important-notify","limitNotifications",!0),option.defineSelect("#calculator-type","type",!0,function(){customTheme("custom"==localStorage.theme?!0:!1)}),document.getElementById("theme-file-upload").addEventListener("change",readFile,!1),$("#save-current-theme").click(function(){theme.save(jQuery.parseJSON(localStorage.customTheme))}),option.defineCheck("#dissable-analytics","dev",!0),$("#reset-localStorage").find("a").click(function(){storage.resetAll()}),$("#guid > h3").text(localStorage.guid),$("h1").click(function(){1==tenClick()&&1==event.shiftKey&&("true"!=localStorage.dev&&analyticsEvent("dev-center","clicked"),$(".lightbox").unbind(),$(".lightbox, .popup").show(),myLibrary(".popup").center(),setTimeout(function(){$(".lightbox").click(function(){$(".lightbox, .popup").hide(),$(".lightbox").unbind("click")})},600))}),1!=clientInformation.onLine?$("#changelog").hide():$.getJSON("https://raw.githubusercontent.com/Christianjuth/calculator-browser-extension/JSON/changelog.json",function(e){for(i=0;i<Math.min(e.length,3);i++)line=e[i],changelogLine(0==i?line:line)})});var numClick=1;option={defineCheck:function(e,t,n,i,o){void 0==i&&(i=function(){}),void 0==o&&(o=function(){}),e=$(e),"true"==localStorage[t]?(e.find("input").prop("checked",!0),i()):(e.find("input").prop("checked",!1),o()),e.iCheck({checkboxClass:"icheckbox_square-grey checkbox",increaseArea:"20%"}).on("ifToggled",function(){0!=e.find("input").prop("checked")?(localStorage[t]="true",i()):(localStorage[t]="false",o())}),1==n&&this.watch(t,500,function(n){n.defineCheck(e,t,!1,i,o)})},dissableCheck:function(e){e=$(e),$(e).fadeTo(100,.4,function(){$(e).children(".checkbox").iCheck("disable")})},enableCheck:function(e){e=$(e),$(e).fadeTo(100,1,function(){$(e).children(".checkbox").iCheck("enable")})},defineSelect:function(e,t,n,i){e=$(e),e.val(localStorage[t]),e.chosen({disable_search_threshold:10}),e.trigger("chosen:updated"),i(),e.change(function(){localStorage[t]=e.val(),i()}),1==n&&this.watch(t,1e3,function(n){n.defineSelect(e,t,!1,i)}),e.trigger("chosen:updated")},watch:function(e,t,n){var i=localStorage[e];setTimeout(function(e,t,n,i,o){localStorage[e]!=i&&n(o),o.watch(e,t,n)},t,e,t,n,i,this)}},window.Alert=function(e,t,n){var i=$("<p />",{text:t}),o=$("<button />",{text:"Ok","class":"full"});dialogue(i.add(o),e,n)};
