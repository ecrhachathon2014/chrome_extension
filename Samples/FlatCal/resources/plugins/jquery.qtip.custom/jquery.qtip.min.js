!function(t,e,i){!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)}(function(s){"use strict";function o(t,e,i,o){this.id=i,this.target=t,this.tooltip=j,this.elements={target:t},this._id=R+"-"+i,this.timers={img:{}},this.options=e,this.plugins={},this.cache={event:{},target:s(),disabled:q,attr:o,onTooltip:q,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=q}function n(t){return t===j||"object"!==s.type(t)}function r(t){return!(s.isFunction(t)||t&&t.attr||t.length||"object"===s.type(t)&&(t.jquery||t.then))}function a(t){var e,i,o,a;return n(t)?q:(n(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,n(e)||e.jquery||e.done?e=t.content={text:i=r(e)?q:e}:i=e.text,"ajax"in e&&(o=e.ajax,a=o&&o.once!==q,delete e.ajax,e.text=function(t,e){var n=i||s(this).attr(e.options.content.attr)||"Loading...",r=s.ajax(s.extend({},o,{context:e})).then(o.success,j,o.error).then(function(t){return t&&a&&e.set("content.text",t),t},function(t,i,s){e.destroyed||0===t.status||e.set("content.text",i+": "+s)});return a?n:(e.set("content.text",n),r)}),"title"in e&&(n(e.title)||(e.button=e.title.button,e.title=e.title.text),r(e.title||q)&&(e.title=q))),"position"in t&&n(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&n(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===T?{ready:T}:{event:t.show}),"hide"in t&&n(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&n(t.style)&&(t.style={classes:t.style}),s.each(V,function(){this.sanitize&&this.sanitize(t)}),t)}function h(t,e){for(var s,i=0,o=t,n=e.split(".");o=o[n[i++]];)i<n.length&&(s=o);return[s||t,n.pop()]}function l(t,e){var i,s,o;for(i in this.checks)for(s in this.checks[i])(o=new RegExp(s,"i").exec(t))&&(e.push(o),("builtin"===i||this.plugins[i])&&this.checks[i][s].apply(this.plugins[i]||this,e))}function c(t){return H.concat("").join(t?"-"+t+" ":" ")}function f(i){return i&&{type:i.type,pageX:i.pageX,pageY:i.pageY,target:i.target,relatedTarget:i.relatedTarget,scrollX:i.scrollX||t.pageXOffset||e.body.scrollLeft||e.documentElement.scrollLeft,scrollY:i.scrollY||t.pageYOffset||e.body.scrollTop||e.documentElement.scrollTop}||{}}function d(t,e){return e>0?setTimeout(s.proxy(t,this),e):void t.call(this)}function p(t){return this.tooltip.hasClass(te)?q:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),void(this.timers.show=d.call(this,function(){this.toggle(T,t)},this.options.show.delay)))}function u(t){if(this.tooltip.hasClass(te))return q;var e=s(t.relatedTarget),i=e.closest(G)[0]===this.tooltip[0],o=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(i||o))try{t.preventDefault(),t.stopImmediatePropagation()}catch(n){}else this.timers.hide=d.call(this,function(){this.toggle(q,t)},this.options.hide.delay,this)}function g(t){return this.tooltip.hasClass(te)||!this.options.hide.inactive?q:(clearTimeout(this.timers.inactive),void(this.timers.inactive=d.call(this,function(){this.hide(t)},this.options.hide.inactive)))}function m(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function v(t,i,o){s(e.body).delegate(t,(i.split?i:i.join(he+" "))+he,function(){var t=F.api[s.attr(this,Y)];t&&!t.disabled&&o.apply(t,arguments)})}function y(t,i,n){var r,h,l,c,f,d=s(e.body),p=t[0]===e?d:t,u=t.metadata?t.metadata(n.metadata):j,g="html5"===n.metadata.type&&u?u[n.metadata.name]:j,m=t.data(n.metadata.name||"qtipopts");try{m="string"==typeof m?s.parseJSON(m):m}catch(v){}if(c=s.extend(T,{},F.defaults,n,"object"==typeof m?a(m):j,a(g||u)),h=c.position,c.id=i,"boolean"==typeof c.content.text){if(l=t.attr(c.content.attr),c.content.attr===q||!l)return q;c.content.text=l}if(h.container.length||(h.container=d),h.target===q&&(h.target=p),c.show.target===q&&(c.show.target=p),c.show.solo===T&&(c.show.solo=h.container.closest("body")),c.hide.target===q&&(c.hide.target=p),c.position.viewport===T&&(c.position.viewport=h.container),h.container=h.container.eq(0),h.at=new O(h.at,T),h.my=new O(h.my),t.data(R))if(c.overwrite)t.qtip("destroy",!0);else if(c.overwrite===q)return q;return t.attr(X,i),c.suppress&&(f=t.attr("title"))&&t.removeAttr("title").attr(ie,f).attr("title",""),r=new o(t,c,i,!!l),t.data(R,r),t.one("remove.qtip-"+i+" removeqtip.qtip-"+i,function(){var t;(t=s(this).data(R))&&t.destroy(!0)}),r}function b(t){return t.charAt(0).toUpperCase()+t.slice(1)}function w(t,e){var n,r,s=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+we.join(s+" ")+s).split(" "),a=0;if(be[e])return t.css(be[e]);for(;n=o[a++];)if((r=t.css(n))!==i)return be[e]=n,r}function x(t,e){return Math.ceil(parseFloat(w(t,e)))}function _(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.init(this.qtip=t)}function C(t,e){this.options=e,this._ns="-modal",this.init(this.qtip=t)}var F,N,O,$,se,T=!0,q=!1,j=null,z="x",M="y",k="width",I="height",W="top",E="left",S="bottom",L="right",A="center",B="flipinvert",P="shift",V={},R="qtip",X="data-hasqtip",Y="data-qtip-id",H=["ui-widget","ui-tooltip"],G="."+R,U="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Q=R+"-fixed",J=R+"-default",K=R+"-focus",Z=R+"-hover",te=R+"-disabled",ee="_replacedByqTip",ie="oldtitle",oe={ie:function(){for(var t=3,i=e.createElement("div");(i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];);return t>4?t:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||q};N=o.prototype,N._when=function(t){return s.when.apply(s,t)},N.render=function(t){if(this.rendered||this.destroyed)return this;var d,e=this,i=this.options,o=this.cache,n=this.elements,r=i.content.text,a=i.content.title,h=i.content.button,l=i.position,f=("."+this._id+" ",[]);return s.attr(this.target[0],"aria-describedby",this._id),this.tooltip=n.tooltip=d=s("<div/>",{id:this._id,"class":[R,J,i.style.classes,R+"-pos-"+i.position.my.abbrev()].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:"mouse"===l.target&&l.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":q,"aria-describedby":this._id+"-content","aria-hidden":T}).toggleClass(te,this.disabled).attr(Y,this.id).data(R,this).appendTo(l.container).append(n.content=s("<div />",{"class":R+"-content",id:this._id+"-content","aria-atomic":T})),this.rendered=-1,this.positioning=T,a&&(this._createTitle(),s.isFunction(a)||f.push(this._updateTitle(a,q))),h&&this._createButton(),s.isFunction(r)||f.push(this._updateContent(r,q)),this.rendered=T,this._setWidget(),s.each(V,function(t){var i;"render"===this.initialize&&(i=this(e))&&(e.plugins[t]=i)}),this._unassignEvents(),this._assignEvents(),this._when(f).then(function(){e._trigger("render"),e.positioning=q,e.hiddenDuringWait||!i.show.ready&&!t||e.toggle(T,o.event,q),e.hiddenDuringWait=q}),F.api[this.id]=this,this},N.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=T;var t=this.target,e=t.attr(ie);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),s.each(this.plugins,function(){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),t.removeData(R).removeAttr(Y).removeAttr(X).removeAttr("aria-describedby"),this.options.suppress&&e&&t.attr("title",e).removeAttr(ie),this._unbind(t),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=j,delete F.api[this.id]}}return this.destroyed?this.target:(t===T&&"hide"!==this.triggering||!this.rendered?e.call(this):(this.tooltip.one("tooltiphidden",s.proxy(e,this)),!this.triggering&&this.hide()),this.target)},$=N.checks={builtin:{"^id$":function(t,e,i,o){var n=i===T?F.nextid:i,r=R+"-"+n;n!==q&&n.length>0&&!s("#"+r).length?(this._id=r,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=o},"^prerender":function(t,e,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,i){this._updateContent(i)},"^content.attr$":function(t,e,i,s){this.options.content.text===this.target.attr(s)&&this._updateContent(this.target.attr(i))},"^content.title$":function(t,e,i){return i?(i&&!this.elements.title&&this._createTitle(),void this._updateTitle(i)):this._removeTitle()},"^content.button$":function(t,e,i){this._updateButton(i)},"^content.title.(text|button)$":function(t,e,i){this.set("content."+e,i)},"^position.(my|at)$":function(t,e,i){"string"==typeof i&&(t[e]=new O(i,"at"===e))},"^position.container$":function(t,e,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(t,e,i){i&&(!this.rendered&&this.render(T)||this.toggle(T))},"^style.classes$":function(t,e,i,s){this.rendered&&this.tooltip.removeClass(s).addClass(i)},"^style.(width|height)":function(t,e,i){this.rendered&&this.tooltip.css(e,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(t,e,i){this.rendered&&this.tooltip.toggleClass(J,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,i){this.rendered&&this.tooltip[(s.isFunction(i)?"":"un")+"bind"]("tooltip"+e,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var t=this.options.position;this.tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},N.get=function(t){if(this.destroyed)return this;var e=h(this.options,t.toLowerCase()),i=e[0][e[1]];return i.precedance?i.string():i};var ne=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,re=/^prerender|show\.ready/i;N.set=function(t,e){if(this.destroyed)return this;{var c,i=this.rendered,o=q,n=this.options;this.checks}return"string"==typeof t?(c=t,t={},t[c]=e):t=s.extend({},t),s.each(t,function(e,r){if(i&&re.test(e))return void delete t[e];var l,a=h(n,e.toLowerCase());l=a[0][a[1]],a[0][a[1]]=r&&r.nodeType?s(r):r,o=ne.test(e)||o,t[e]=[a[0],a[1],r,l]}),a(n),this.positioning=T,s.each(t,s.proxy(l,this)),this.positioning=q,this.rendered&&this.tooltip[0].offsetWidth>0&&o&&this.reposition("mouse"===n.position.target?j:this.cache.event),this},N._update=function(t,e){var o=this,n=this.cache;return this.rendered&&t?(s.isFunction(t)&&(t=t.call(this.elements.target,n.event,this)||""),s.isFunction(t.then)?(n.waiting=T,t.then(function(t){return n.waiting=q,o._update(t,e)},j,function(t){return o._update(t,e)})):t===q||!t&&""!==t?q:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block",visibility:"visible"})):e.html(t),this._waitForContent(e).then(function(t){t.images&&t.images.length&&o.rendered&&o.tooltip[0].offsetWidth>0&&o.reposition(n.event,!t.length)}))):q},N._waitForContent=function(t){var e=this.cache;return e.waiting=T,(s.fn.imagesLoaded?t.imagesLoaded():s.Deferred().resolve([])).done(function(){e.waiting=q}).promise()},N._updateContent=function(t,e){this._update(t,this.elements.content,e)},N._updateTitle=function(t,e){this._update(t,this.elements.title,e)===q&&this._removeTitle(q)},N._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=s("<div />",{"class":R+"-titlebar "+(this.options.style.widget?c("header"):"")}).append(t.title=s("<div />",{id:e,"class":R+"-title","aria-atomic":T})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){s(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){s(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},N._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=j,t!==q&&this.reposition())},N.reposition=function(i,o){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=T;var M,k,n=this.cache,r=this.tooltip,a=this.options.position,h=a.target,l=a.my,c=a.at,f=a.viewport,d=a.container,p=a.adjust,u=p.method.split(" "),g=r.outerWidth(q),m=r.outerHeight(q),v=0,y=0,b=r.css("position"),w={left:0,top:0},x=r[0].offsetWidth>0,_=i&&"scroll"===i.type,C=s(t),j=d[0].ownerDocument,z=this.mouse;if(s.isArray(h)&&2===h.length)c={x:E,y:W},w={left:h[0],top:h[1]};else if("mouse"===h)c={x:E,y:W},!z||!z.pageX||!p.mouse&&i&&i.pageX?i&&i.pageX||((!p.mouse||this.options.show.distance)&&n.origin&&n.origin.pageX?i=n.origin:(!i||i&&("resize"===i.type||"scroll"===i.type))&&(i=n.event)):i=z,"static"!==b&&(w=d.offset()),j.body.offsetWidth!==(t.innerWidth||j.documentElement.clientWidth)&&(k=s(e.body).offset()),w={left:i.pageX-w.left+(k&&k.left||0),top:i.pageY-w.top+(k&&k.top||0)},p.mouse&&_&&z&&(w.left-=(z.scrollX||0)-C.scrollLeft(),w.top-=(z.scrollY||0)-C.scrollTop());else{if("event"===h?i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?n.target=s(i.target):i.target||(n.target=this.elements.target):"event"!==h&&(n.target=s(h.jquery?h:this.elements.target)),h=n.target,h=s(h).eq(0),0===h.length)return this;h[0]===e||h[0]===t?(v=oe.iOS?t.innerWidth:h.width(),y=oe.iOS?t.innerHeight:h.height(),h[0]===t&&(w={top:(f||h).scrollTop(),left:(f||h).scrollLeft()})):V.imagemap&&h.is("area")?M=V.imagemap(this,h,c,V.viewport?u:q):V.svg&&h&&h[0].ownerSVGElement?M=V.svg(this,h,c,V.viewport?u:q):(v=h.outerWidth(q),y=h.outerHeight(q),w=h.offset()),M&&(v=M.width,y=M.height,k=M.offset,w=M.position),w=this.reposition.offset(h,w,d),(oe.iOS>3.1&&oe.iOS<4.1||oe.iOS>=4.3&&oe.iOS<4.33||!oe.iOS&&"fixed"===b)&&(w.left-=C.scrollLeft(),w.top-=C.scrollTop()),(!M||M&&M.adjustable!==q)&&(w.left+=c.x===L?v:c.x===A?v/2:0,w.top+=c.y===S?y:c.y===A?y/2:0)}return w.left+=p.x+(l.x===L?-g:l.x===A?-g/2:0),w.top+=p.y+(l.y===S?-m:l.y===A?-m/2:0),V.viewport?(w.adjusted=V.viewport(this,w,a,v,y,g,m),k&&w.adjusted.left&&(w.left+=k.left),k&&w.adjusted.top&&(w.top+=k.top)):w.adjusted={left:0,top:0},this._trigger("move",[w,f.elem||f],i)?(delete w.adjusted,o===q||!x||isNaN(w.left)||isNaN(w.top)||"mouse"===h||!s.isFunction(a.effect)?r.css(w):s.isFunction(a.effect)&&(a.effect.call(r,this,s.extend({},w)),r.queue(function(t){s(this).css({opacity:"",height:""}),oe.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=q,this):this},N.reposition.offset=function(t,i,o){function n(t,e){i.left+=e*t.scrollLeft(),i.top+=e*t.scrollTop()}if(!o[0])return i;var l,c,f,d,r=s(t[0].ownerDocument),a=!!oe.ie&&"CSS1Compat"!==e.compatMode,h=o[0];do"static"!==(c=s.css(h,"position"))&&("fixed"===c?(f=h.getBoundingClientRect(),n(r,-1)):(f=s(h).position(),f.left+=parseFloat(s.css(h,"borderLeftWidth"))||0,f.top+=parseFloat(s.css(h,"borderTopWidth"))||0),i.left-=f.left+(parseFloat(s.css(h,"marginLeft"))||0),i.top-=f.top+(parseFloat(s.css(h,"marginTop"))||0),l||"hidden"===(d=s.css(h,"overflow"))||"visible"===d||(l=s(h)));while(h=h.offsetParent);return l&&(l[0]!==r[0]||a)&&n(l,1),i};var ae=(O=N.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,A).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var i=t.charAt(0);this.precedance="t"===i||"b"===i?M:z}).prototype;ae.invert=function(t,e){this[t]=this[t]===E?L:this[t]===L?E:e||this[t]},ae.string=function(){var t=this.x,e=this.y;return t===e?t:this.precedance===M||this.forceY&&"center"!==e?e+" "+t:t+" "+e},ae.abbrev=function(){var t=this.string().split(" ");return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},ae.clone=function(){return new O(this.string(),this.forceY)},N.toggle=function(t,i){var o=this.cache,n=this.options,r=this.tooltip;if(i){if(/over|enter/.test(i.type)&&/out|leave/.test(o.event.type)&&n.show.target.add(i.target).length===n.show.target.length&&r.has(i.relatedTarget).length)return this;o.event=f(i)}if(this.waiting&&!t&&(this.hiddenDuringWait=T),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var v,y,x,a=t?"show":"hide",h=this.options[a],c=(this.options[t?"hide":"show"],this.options.position),d=this.options.content,p=this.tooltip.css("width"),u=this.tooltip.is(":visible"),g=t||1===h.target.length,m=!i||h.target.length<2||o.target[0]===i.target;return(typeof t).search("boolean|number")&&(t=!u),v=!r.is(":animated")&&u===t&&m,y=v?j:!!this._trigger(a,[90]),this.destroyed?this:(y!==q&&t&&this.focus(i),!y||v?this:(s.attr(r[0],"aria-hidden",!t),t?(o.origin=f(this.mouse),s.isFunction(d.text)&&this._updateContent(d.text,q),s.isFunction(d.title)&&this._updateTitle(d.title,q),!se&&"mouse"===c.target&&c.adjust.mouse&&(s(e).bind("mousemove."+R,this._storeMouse),se=T),p||r.css("width",r.outerWidth(q)),this.reposition(i,arguments[2]),p||r.css("width",""),h.solo&&("string"==typeof h.solo?s(h.solo):s(G,h.solo)).not(r).not(h.target).qtip("hide",s.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete o.origin,se&&!s(G+'[tracking="true"]:visible',h.solo).not(r).length&&(s(e).unbind("mousemove."+R),se=q),this.blur(i)),x=s.proxy(function(){t?(oe.ie&&r[0].style.removeAttribute("filter"),r.css("overflow",""),"string"==typeof h.autofocus&&s(this.options.show.autofocus,r).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):r.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),h.effect===q||g===q?(r[a](),x()):s.isFunction(h.effect)?(r.stop(1,1),h.effect.call(r,this),r.queue("fx",function(t){x(),t()})):r.fadeTo(90,t?1:0,x),t&&h.target.trigger("qtip-"+this.id+"-inactive"),this))},N.show=function(t){return this.toggle(T,t)},N.hide=function(t){return this.toggle(q,t)},N.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=s(G),i=this.tooltip,o=parseInt(i[0].style.zIndex,10),n=F.zindex+e.length;return i.hasClass(K)||this._trigger("focus",[n],t)&&(o!==n&&(e.each(function(){this.style.zIndex>o&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+K).qtip("blur",t)),i.addClass(K)[0].style.zIndex=n),this},N.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(K),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},N.disable=function(t){return this.destroyed?this:("toggle"===t?t=!(this.rendered?this.tooltip.hasClass(te):this.disabled):"boolean"!=typeof t&&(t=T),this.rendered&&this.tooltip.toggleClass(te,t).attr("aria-disabled",t),this.disabled=!!t,this)},N.enable=function(){return this.disable(q)},N._createButton=function(){var t=this,e=this.elements,i=e.tooltip,o=this.options.content.button,n="string"==typeof o,r=n?o:"Close tooltip";e.button&&e.button.remove(),e.button=o.jquery?o:s("<a />",{"class":"qtip-close "+(this.options.style.widget?"":R+"-icon"),title:r,"aria-label":r}).prepend(s("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||i).attr("role","button").click(function(e){return i.hasClass(te)||t.hide(e),q})},N._updateButton=function(t){if(!this.rendered)return q;var e=this.elements.button;t?this._createButton():e.remove()},N._setWidget=function(){var t=this.options.style.widget,e=this.elements,i=e.tooltip,s=i.hasClass(te);i.removeClass(te),te=t?"ui-state-disabled":"qtip-disabled",i.toggleClass(te,s),i.toggleClass("ui-helper-reset "+c(),t).toggleClass(J,this.options.style.def&&!t),e.content&&e.content.toggleClass(c("content"),t),e.titlebar&&e.titlebar.toggleClass(c("header"),t),e.button&&e.button.toggleClass(R+"-icon",!t)},N._storeMouse=function(t){(this.mouse=f(t)).type="mousemove"},N._bind=function(t,e,i,o,n){var r="."+this._id+(o?"-"+o:"");e.length&&s(t).bind((e.split?e:e.join(r+" "))+r,s.proxy(i,n||this))},N._unbind=function(t,e){s(t).unbind("."+this._id+(e?"-"+e:""))};var he="."+R;s(function(){v(G,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,i=s(t.currentTarget),o=s(t.relatedTarget||t.target),n=this.options;e?(this.focus(t),i.hasClass(Q)&&!i.hasClass(te)&&clearTimeout(this.timers.hide)):"mouse"===n.position.target&&n.hide.event&&n.show.target&&!o.closest(n.show.target[0]).length&&this.hide(t),i.toggleClass(Z,e)}),v("["+Y+"]",U,g)}),N._trigger=function(t,e,i){var o=s.Event("tooltip"+t);return o.originalEvent=i&&s.extend({},i)||this.cache.event||j,this.triggering=t,this.tooltip.trigger(o,[this].concat(e||[])),this.triggering=q,!o.isDefaultPrevented()},N._bindEvents=function(t,e,i,o,n,r){if(o.add(i).length===o.length){var a=[];e=s.map(e,function(e){var i=s.inArray(e,t);return i>-1?void a.push(t.splice(i,1)[0]):e}),a.length&&this._bind(i,a,function(t){var e=this.rendered?this.tooltip[0].offsetWidth>0:!1;(e?r:n).call(this,t)})}this._bind(i,t,n),this._bind(o,e,r)},N._assignInitialEvents=function(t){function e(t){return this.disabled||this.destroyed?q:(this.cache.event=f(t),this.cache.target=t?s(t.target):[i],clearTimeout(this.timers.show),void(this.timers.show=d.call(this,function(){this.render("object"==typeof t||o.show.ready)},o.show.delay)))}var o=this.options,n=o.show.target,r=o.hide.target,a=o.show.event?s.trim(""+o.show.event).split(" "):[],h=o.hide.event?s.trim(""+o.hide.event).split(" "):[];/mouse(over|enter)/i.test(o.show.event)&&!/mouse(out|leave)/i.test(o.hide.event)&&h.push("mouseleave"),this._bind(n,"mousemove",function(t){this._storeMouse(t),this.cache.onTarget=T}),this._bindEvents(a,h,n,r,e,function(){clearTimeout(this.timers.show)}),(o.show.ready||o.prerender)&&e.call(this,t)},N._assignEvents=function(){var i=this,o=this.options,n=o.position,r=this.tooltip,a=o.show.target,h=o.hide.target,l=n.container,c=n.viewport,f=s(e),v=(s(e.body),s(t)),y=o.show.event?s.trim(""+o.show.event).split(" "):[],b=o.hide.event?s.trim(""+o.hide.event).split(" "):[];s.each(o.events,function(t,e){i._bind(r,"toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t],e,null,r)}),o.hide.fixed?h=h.add(r.addClass(Q)):/mouse(over|enter)/i.test(o.show.event)&&this._bind(h,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+o.hide.event).indexOf("unfocus")>-1&&this._bind(l.closest("html"),["mousedown","touchstart"],function(t){var e=s(t.target),i=this.rendered&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0,o=e.parents(G).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||o||this.target.has(e[0]).length||!i||this.hide(t)}),"number"==typeof o.hide.inactive&&(this._bind(a,"qtip-"+this.id+"-inactive",g),this._bind(h.add(r),F.inactiveEvents,g,"-inactive")),this._bindEvents(y,b,a,h,p,u),this._bind(a.add(r),"mousemove",function(t){if("number"==typeof o.hide.distance){var e=this.cache.origin||{},i=this.options.hide.distance,s=Math.abs;(s(t.pageX-e.pageX)>=i||s(t.pageY-e.pageY)>=i)&&this.hide(t)}this._storeMouse(t)}),"mouse"===n.target&&n.adjust.mouse&&(o.hide.event&&this._bind(a,["mouseenter","mouseleave"],function(t){this.cache.onTarget="mouseenter"===t.type}),this._bind(f,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(n.adjust.resize||c.length)&&this._bind(s.event.special.resize?c:v,"resize",m),n.adjust.scroll&&this._bind(v.add(n.container),"scroll",m)},N._unassignEvents=function(){var i=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],t,e];this._unbind(s([]).pushStack(s.grep(i,function(t){return"object"==typeof t})))},F=s.fn.qtip=function(t,e,o){var n=(""+t).toLowerCase(),r=j,h=s.makeArray(arguments).slice(1),l=h[h.length-1],c=this[0]?s.data(this[0],R):j;return!arguments.length&&c||"api"===n?c:"string"==typeof t?(this.each(function(){var t=s.data(this,R);if(!t)return T;if(l&&l.timeStamp&&(t.cache.event=l),!e||"option"!==n&&"options"!==n)t[n]&&t[n].apply(t,h);else{if(o===i&&!s.isPlainObject(e))return r=t.get(e),q;t.set(e,o)}}),r!==j?r:this):"object"!=typeof t&&arguments.length?void 0:(c=a(s.extend(T,{},t)),this.each(function(t){var e,i;return i=s.isArray(c.id)?c.id[t]:c.id,i=!i||i===q||i.length<1||F.api[i]?F.nextid++:i,e=y(s(this),i,c),e===q?T:(F.api[i]=e,s.each(V,function(){"initialize"===this.initialize&&this(e)}),void e._assignInitialEvents(l))}))},s.qtip=o,F.api={},s.each({attr:function(t,e){if(this.length){var i=this[0],o="title",n=s.data(i,"qtip");if(t===o&&n&&"object"==typeof n&&n.options.suppress)return arguments.length<2?s.attr(i,ie):(n&&n.options.content.attr===o&&n.cache.attr&&n.set("content.text",e),this.attr(ie,e))}return s.fn["attr"+ee].apply(this,arguments)},clone:function(t){var o=(s([]),s.fn["clone"+ee].apply(this,arguments));return t||o.filter("["+ie+"]").attr("title",function(){return s.attr(this,ie)}).removeAttr(ie),o}},function(t,e){if(!e||s.fn[t+ee])return T;var i=s.fn[t+ee]=s.fn[t];s.fn[t]=function(){return e.apply(this,arguments)||i.apply(this,arguments)}}),s.ui||(s["cleanData"+ee]=s.cleanData,s.cleanData=function(t){for(var i,e=0;(i=s(t[e])).length;e++)if(i.attr(X))try{i.triggerHandler("removeqtip")}catch(o){}s["cleanData"+ee].apply(this,arguments)}),F.version="2.2.0",F.nextid=0,F.inactiveEvents=U,F.zindex=15e3,F.defaults={prerender:q,id:q,overwrite:T,suppress:T,content:{text:T,attr:"title",title:q,button:q},position:{my:"top left",at:"bottom right",target:q,container:q,viewport:q,adjust:{x:0,y:0,mouse:T,scroll:T,resize:T,method:"flipinvert flipinvert"},effect:function(t,e){s(this).animate(e,{duration:200,queue:q})}},show:{target:q,event:"mouseenter",effect:T,delay:90,solo:q,ready:q,autofocus:q},hide:{target:q,event:"mouseleave",effect:T,delay:0,fixed:q,inactive:q,leave:"window",distance:q},style:{classes:"",widget:q,width:q,height:q,def:T},events:{render:j,move:j,show:j,hide:j,toggle:j,visible:j,hidden:j,focus:j,blur:j}};var le,fe="margin",de="border",pe="color",ue="background-color",ge="transparent",me=" !important",ve=!!e.createElement("canvas").getContext,ye=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,be={},we=["Webkit","O","Moz","ms"];if(ve)var _e=t.devicePixelRatio||1,Ce=function(){var t=e.createElement("canvas").getContext("2d");return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),Te=_e/Ce;else var xe=function(t,e,i){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};s.extend(_.prototype,{init:function(t){var e,i;i=this.element=t.elements.tip=s("<div />",{"class":R+"-tip"}).prependTo(t.tooltip),ve?(e=s("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=1e5,e.save()):(e=xe("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(s("*",i).add(i),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===W||t.y===A&&this.element.position().top+this.size[1]/2+this.options.offset<e.outerHeight(T))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===q||e===q?t=q:t===T?t=new O(e.string()):t.string||(t=new O(t),t.fixed=T),t},_parseWidth:function(t,e,i){var s=this.qtip.elements,o=de+b(e)+"Width";return(i?x(i,o):x(s.content,o)||x(this._useTitle(t)&&s.titlebar||s.content,o)||x(s.tooltip,o))||0},_parseRadius:function(t){var e=this.qtip.elements,i=de+b(t.y)+b(t.x)+"Radius";return oe.ie<9?0:x(this._useTitle(t)&&e.titlebar||e.content,i)||x(e.tooltip,i)||0},_invalidColour:function(t,e,i){var s=t.css(e);return!s||i&&s===t.css(i)||ye.test(s)?q:s},_parseColours:function(t){var e=this.qtip.elements,i=this.element.css("cssText",""),o=de+b(t[t.precedance])+b(pe),n=this._useTitle(t)&&e.titlebar||e.content,r=this._invalidColour,a=[];return a[0]=r(i,ue)||r(n,ue)||r(e.content,ue)||r(e.tooltip,ue)||i.css(ue),a[1]=r(i,o,pe)||r(n,o,pe)||r(e.content,o,pe)||r(e.tooltip,o,pe)||e.tooltip.css(o),s("*",i).add(i).css("cssText",ue+":"+ge+me+";"+de+":0"+me+";"),a},_calculateSize:function(t){var h,l,c,e=t.precedance===M,i=this.options.width,s=this.options.height,o="c"===t.abbrev(),n=(e?i:s)*(o?.5:1),r=Math.pow,a=Math.round,f=Math.sqrt(r(n,2)+r(s,2)),d=[this.border/n*f,this.border/s*f];return d[2]=Math.sqrt(r(d[0],2)-r(this.border,2)),d[3]=Math.sqrt(r(d[1],2)-r(this.border,2)),h=f+d[2]+d[3]+(o?0:d[0]),l=h/f,c=[a(l*i),a(l*s)],e?c:c.reverse()},_calculateTip:function(t,e,i){i=i||1,e=e||this.size;var s=e[0]*i,o=e[1]*i,n=Math.ceil(s/2),r=Math.ceil(o/2),a={br:[0,0,s,o,s,0],bl:[0,0,s,0,0,o],tr:[0,o,s,0,s,o],tl:[0,0,0,o,s,o],tc:[0,o,n,0,s,o],bc:[0,0,s,0,n,o],rc:[0,0,s,r,0,o],lc:[s,0,s,o,0,r]};return a.lt=a.br,a.rt=a.bl,a.lb=a.tr,a.rb=a.tl,a[t.abbrev()]},_drawCoords:function(t,e){t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.closePath()},create:function(){var t=this.corner=(ve||oe.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(e,i){if(!this.enabled)return this;var f,d,p,u,g,m,v,y,o=this.qtip.elements,n=this.element,r=n.children(),a=this.options,h=this.size,l=a.mimic,c=Math.round;e||(e=this.qtip.cache.corner||this.corner),l===q?l=e:(l=new O(l),l.precedance=e.precedance,"inherit"===l.x?l.x=e.x:"inherit"===l.y?l.y=e.y:l.x===l.y&&(l[e.precedance]=e[e.precedance])),d=l.precedance,e.precedance===z?this._swapDimensions():this._resetDimensions(),f=this.color=this._parseColours(e),f[1]!==ge?(y=this.border=this._parseWidth(e,e[e.precedance]),a.border&&1>y&&!ye.test(f[1])&&(f[0]=f[1]),this.border=y=a.border!==T?a.border:y):this.border=y=0,v=this.size=this._calculateSize(e),n.css({width:v[0],height:v[1],lineHeight:v[1]+"px"}),m=e.precedance===M?[c(l.x===E?y:l.x===L?v[0]-h[0]-y:(v[0]-h[0])/2),c(l.y===W?v[1]-h[1]:0)]:[c(l.x===E?v[0]-h[0]:0),c(l.y===W?y:l.y===S?v[1]-h[1]-y:(v[1]-h[1])/2)],ve?(p=r[0].getContext("2d"),p.restore(),p.save(),p.clearRect(0,0,6e3,6e3),u=this._calculateTip(l,h,Te),g=this._calculateTip(l,this.size,Te),r.attr(k,v[0]*Te).attr(I,v[1]*Te),r.css(k,v[0]).css(I,v[1]),this._drawCoords(p,g),p.fillStyle=f[1],p.fill(),p.translate(m[0]*Te,m[1]*Te),this._drawCoords(p,u),p.fillStyle=f[0],p.fill()):(u=this._calculateTip(l),u="m"+u[0]+","+u[1]+" l"+u[2]+","+u[3]+" "+u[4]+","+u[5]+" xe",m[2]=y&&/^(r|b)/i.test(e.string())?8===oe.ie?2:1:0,r.css({coordsize:v[0]+y+" "+(v[1]+y),antialias:""+(l.string().indexOf(A)>-1),left:m[0]-m[2]*Number(d===z),top:m[1]-m[2]*Number(d===M),width:v[0]+y,height:v[1]+y}).each(function(t){var e=s(this);e[e.prop?"prop":"attr"]({coordsize:v[0]+y+" "+(v[1]+y),path:u,fillcolor:f[0],filled:!!t,stroked:!t}).toggle(!(!y&&!t)),!t&&e.html(xe("stroke",'weight="'+2*y+'px" color="'+f[1]+'" miterlimit="1000" joinstyle="miter"'))})),t.opera&&setTimeout(function(){o.tip.css({display:"inline-block",visibility:"visible"})},1),i!==q&&this.calculate(e,v)},calculate:function(t,e){if(!this.enabled)return q;var l,c,i=this,o=this.qtip.elements,n=this.element,r=this.options.offset,h=(o.tooltip.hasClass("ui-widget"),{});return t=t||this.corner,l=t.precedance,e=e||this._calculateSize(t),c=[t.x,t.y],l===z&&c.reverse(),s.each(c,function(s,n){var a,c,f;n===A?(a=l===M?E:W,h[a]="50%",h[fe+"-"+a]=-Math.round(e[l===M?0:1]/2)+r):(a=i._parseWidth(t,n,o.tooltip),c=i._parseWidth(t,n,o.content),f=i._parseRadius(t),h[n]=Math.max(-i.border,s?c:r+(f>a?f:-a)))}),h[t[l]]-=e[l===z?0:1],n.css({margin:"",top:"",bottom:"",left:"",right:""}).css(h),h},reposition:function(t,e,s){function n(t,e,i,s,o){t===P&&h.precedance===e&&l[s]&&h[i]!==A?h.precedance=h.precedance===z?M:z:t!==P&&l[s]&&(h[e]=h[e]===A?l[s]>0?s:o:h[e]===s?o:s)
}function r(t,e,o){h[t]===A?g[fe+"-"+e]=p[t]=u[fe+"-"+e]-l[e]:(m=u[o]!==i?[l[e],-u[e]]:[-l[e],u[e]],(p[t]=Math.max(m[0],m[1]))>m[0]&&(s[e]-=l[e],p[e]=q),g[u[o]!==i?o:e]=p[t])}if(this.enabled){var u,m,a=e.cache,h=this.corner.clone(),l=s.adjusted,c=e.options.position.adjust.method.split(" "),f=c[0],d=c[1]||c[0],p={left:q,top:q,x:0,y:0},g={};this.corner.fixed!==T&&(n(f,z,M,E,L),n(d,M,z,W,S),h.string()===a.corner.string()||a.cornerTop===l.top&&a.cornerLeft===l.left||this.update(h,q)),u=this.calculate(h),u.right!==i&&(u.left=-u.right),u.bottom!==i&&(u.top=-u.bottom),u.user=this.offset,(p.left=f===P&&!!l.left)&&r(z,E,L),(p.top=d===P&&!!l.top)&&r(M,W,S),this.element.css(g).toggle(!(p.x&&p.y||h.x===A&&p.y||h.y===A&&p.x)),s.left-=u.left.charAt?u.user:f!==P||p.top||!p.left&&!p.top?u.left+this.border:0,s.top-=u.top.charAt?u.user:d!==P||p.left||!p.left&&!p.top?u.top+this.border:0,a.cornerLeft=l.left,a.cornerTop=l.top,a.corner=h.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),le=V.tip=function(t){return new _(t,t.options.style.tip)},le.initialize="render",le.sanitize=function(t){if(t.style&&"tip"in t.style){var e=t.style.tip;"object"!=typeof e&&(e=t.style.tip={corner:e}),/string|boolean/i.test(typeof e.corner)||(e.corner=T)}},$.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){this.size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},s.extend(T,F.defaults,{style:{tip:{corner:T,mimic:q,width:6,height:6,border:T,offset:0}}}),V.viewport=function(i,s,o,n,r,a,h){function l(t,e,i,o,n,r,a,h,l){var c=s[n],f=d[t],u=p[t],g=i===P,m=f===n?l:f===r?-l:-l/2,v=u===n?h:u===r?-h:-h/2,y=O[n]+$[n]-(D?0:j[n]),b=y-c,w=c+l-(a===k?F:N)-y,x=m-(d.precedance===t||f===d[e]?v:0)-(u===A?h/2:0);return g?(x=(f===n?1:-1)*m,s[n]+=b>0?b:w>0?-w:0,s[n]=Math.max(-j[n]+$[n],c-x,Math.min(Math.max(-j[n]+$[n]+(a===k?F:N),c+x),s[n],"center"===f?c-m:1e9))):(o*=i===B?2:0,b>0&&(f!==n||w>0)?(s[n]-=x+o,C.invert(t,n)):w>0&&(f!==r||b>0)&&(s[n]-=(f===A?-x:x)+o,C.invert(t,r)),s[n]<O&&-s[n]>w&&(s[n]=c,C=d.clone())),s[n]-c}var _,C,T,j,D,F,N,O,$,c=o.target,f=i.elements.tooltip,d=o.my,p=o.at,u=o.adjust,g=u.method.split(" "),m=g[0],v=g[1]||g[0],y=o.viewport,b=o.container,w=i.cache,x={left:0,top:0};return y.jquery&&c[0]!==t&&c[0]!==e.body&&"none"!==u.method?(j=b.offset()||x,D="static"===b.css("position"),_="fixed"===f.css("position"),F=y[0]===t?y.width():y.outerWidth(q),N=y[0]===t?y.height():y.outerHeight(q),O={left:_?0:y.scrollLeft(),top:_?0:y.scrollTop()},$=y.offset()||x,("shift"!==m||"shift"!==v)&&(C=d.clone()),x={left:"none"!==m?l(z,M,m,u.x,E,L,k,n,a):0,top:"none"!==v?l(M,z,v,u.y,W,S,I,r,h):0},C&&w.lastClass!==(T=R+"-pos-"+C.abbrev())&&f.removeClass(i.cache.lastClass).addClass(i.cache.lastClass=T),x):x},V.polys={polygon:function(t,e){var o,c,f,i={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:q},s=0,n=[],r=1,a=1,h=0,l=0;for(s=t.length;s--;)o=[parseInt(t[--s],10),parseInt(t[s+1],10)],o[0]>i.position.right&&(i.position.right=o[0]),o[0]<i.position.left&&(i.position.left=o[0]),o[1]>i.position.bottom&&(i.position.bottom=o[1]),o[1]<i.position.top&&(i.position.top=o[1]),n.push(o);if(c=i.width=Math.abs(i.position.right-i.position.left),f=i.height=Math.abs(i.position.bottom-i.position.top),"c"===e.abbrev())i.position={left:i.position.left+i.width/2,top:i.position.top+i.height/2};else{for(;c>0&&f>0&&r>0&&a>0;)for(c=Math.floor(c/2),f=Math.floor(f/2),e.x===E?r=c:e.x===L?r=i.width-c:r+=Math.floor(c/2),e.y===W?a=f:e.y===S?a=i.height-f:a+=Math.floor(f/2),s=n.length;s--&&!(n.length<2);)h=n[s][0]-i.position.left,l=n[s][1]-i.position.top,(e.x===E&&h>=r||e.x===L&&r>=h||e.x===A&&(r>h||h>i.width-r)||e.y===W&&l>=a||e.y===S&&a>=l||e.y===A&&(a>l||l>i.height-a))&&n.splice(s,1);i.position={left:n[0][0],top:n[0][1]}}return i},rect:function(t,e,i,s){return{width:Math.abs(i-t),height:Math.abs(s-e),position:{left:Math.min(t,i),top:Math.min(e,s)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,i,s,o){var n=V.polys._angles[o.abbrev()],r=0===n?0:i*Math.cos(n*Math.PI),a=s*Math.sin(n*Math.PI);return{width:2*i-Math.abs(r),height:2*s-Math.abs(a),position:{left:t+r,top:e+a},adjustable:q}},circle:function(t,e,i,s){return V.polys.ellipse(t,e,i,i,s)}},V.imagemap=function(t,e,i){e.jquery||(e=s(e));var l,c,f,p,u,n=e.attr("shape").toLowerCase().replace("poly","polygon"),r=s('img[usemap="#'+e.parent("map").attr("name")+'"]'),a=s.trim(e.attr("coords")),h=a.replace(/,$/,"").split(",");if(!r.length)return q;if("polygon"===n)p=V.polys.polygon(h,i);else{if(!V.polys[n])return q;for(f=-1,u=h.length,c=[];++f<u;)c.push(parseInt(h[f],10));p=V.polys[n].apply(this,c.concat(i))}return l=r.offset(),l.left+=Math.ceil((r.outerWidth(q)-r.width())/2),l.top+=Math.ceil((r.outerHeight(q)-r.height())/2),p.position.left+=l.left,p.position.top+=l.top,p},V.svg=function(t,i,o){for(var f,d,p,u,g,m,v,y,b,w,x,n=s(e),r=i[0],a=s(r.ownerSVGElement),h=1,l=1,c=!0;!r.getBBox;)r=r.parentNode;if(!r.getBBox||!r.parentNode)return q;f=a.attr("width")||a.width()||parseInt(a.css("width"),10),d=a.attr("height")||a.height()||parseInt(a.css("height"),10);var C=(parseInt(i.css("stroke-width"),10)||0)/2;switch(C&&(h+=C/f,l+=C/d),r.nodeName){case"ellipse":case"circle":w=V.polys.ellipse(r.cx.baseVal.value,r.cy.baseVal.value,(r.rx||r.r).baseVal.value+C,(r.ry||r.r).baseVal.value+C,o);break;case"line":case"polygon":case"polyline":for(b=r.points||[{x:r.x1.baseVal.value,y:r.y1.baseVal.value},{x:r.x2.baseVal.value,y:r.y2.baseVal.value}],w=[],y=-1,m=b.numberOfItems||b.length;++y<m;)v=b.getItem?b.getItem(y):b[y],w.push.apply(w,[v.x,v.y]);w=V.polys.polygon(w,o);break;default:w=r.getBoundingClientRect(),w={width:w.width,height:w.height,position:{left:w.left,top:w.top}},c=!1}return x=w.position,a=a[0],c&&(a.createSVGPoint&&(p=r.getScreenCTM(),b=a.createSVGPoint(),b.x=x.left,b.y=x.top,u=b.matrixTransform(p),x.left=u.x,x.top=u.y),a.viewBox&&(g=a.viewBox.baseVal)&&g.width&&g.height&&(h*=f/g.width,l*=d/g.height)),x.left+=n.scrollLeft(),x.top+=n.scrollTop(),w};var qe,je,ze="qtip-modal",Me="."+ze;je=function(){function t(t){if(s.expr[":"].focusable)return s.expr[":"].focusable;var o,n,r,e=!isNaN(s.attr(t,"tabindex")),i=t.nodeName&&t.nodeName.toLowerCase();return"area"===i?(o=t.parentNode,n=o.name,t.href&&n&&"map"===o.nodeName.toLowerCase()?(r=s("img[usemap=#"+n+"]")[0],!!r&&r.is(":visible")):!1):/input|select|textarea|button|object/.test(i)?!t.disabled:"a"===i?t.href||e:e}function i(t){r.length<1&&t.length?t.not("body").blur():r.first().focus()}function o(t){if(c.is(":visible")){var l,e=s(t.target),o=a.tooltip,n=e.closest(G);l=n.length<1?q:parseInt(n[0].style.zIndex,10)>parseInt(o[0].style.zIndex,10),l||e.closest(G)[0]===o[0]||i(e),h=t.target===r[r.length-1]}}var a,h,l,c,n=this,r={};s.extend(n,{init:function(){return c=n.elem=s("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return q}}).hide(),s(e.body).bind("focusin"+Me,o),s(e).bind("keydown"+Me,function(t){a&&a.options.show.modal.escape&&27===t.keyCode&&a.hide(t)}),c.bind("click"+Me,function(t){a&&a.options.show.modal.blur&&a.hide(t)}),n},update:function(e){a=e,r=e.options.show.modal.stealfocus!==q?e.tooltip.find("*").filter(function(){return t(this)}):[]},toggle:function(t,o,r){var f=(s(e.body),t.tooltip),d=t.options.show.modal,p=d.effect,u=o?"show":"hide",g=c.is(":visible"),m=s(Me).filter(":visible:not(:animated)").not(f);return n.update(t),o&&d.stealfocus!==q&&i(s(":focus")),c.toggleClass("blurs",d.blur),o&&c.appendTo(e.body),c.is(":animated")&&g===o&&l!==q||!o&&m.length?n:(c.stop(T,q),s.isFunction(p)?p.call(c,o):p===q?c[u]():c.fadeTo(parseInt(r,10)||90,o?1:0,function(){o||c.hide()}),o||c.queue(function(t){c.css({left:"",top:""}),s(Me).length||c.detach(),t()}),l=o,a.destroyed&&(a=j),n)}}),n.init()},je=new je,s.extend(C.prototype,{init:function(t){var e=t.tooltip;return this.options.on?(t.elements.overlay=je.elem,e.addClass(ze).css("z-index",F.modal_zindex+s(Me).length),t._bind(e,["tooltipshow","tooltiphide"],function(t,i,o){var n=t.originalEvent;if(t.target===e[0])if(n&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(n.type)&&s(n.relatedTarget).closest(je.elem[0]).length)try{t.preventDefault()}catch(r){}else(!n||n&&"tooltipsolo"!==n.type)&&this.toggle(t,"tooltipshow"===t.type,o)},this._ns,this),t._bind(e,"tooltipfocus",function(t,i){if(!t.isDefaultPrevented()&&t.target===e[0]){var o=s(Me),n=F.modal_zindex+o.length,r=parseInt(e[0].style.zIndex,10);je.elem[0].style.zIndex=n-1,o.each(function(){this.style.zIndex>r&&(this.style.zIndex-=1)}),o.filter("."+K).qtip("blur",t.originalEvent),e.addClass(K)[0].style.zIndex=n,je.update(i);try{t.preventDefault()}catch(a){}}},this._ns,this),void t._bind(e,"tooltiphide",function(t){t.target===e[0]&&s(Me).filter(":visible").not(e).last().qtip("focus",t)},this._ns,this)):this},toggle:function(t,e,i){return t&&t.isDefaultPrevented()?this:void je.toggle(this.qtip,!!e,i)},destroy:function(){this.qtip.tooltip.removeClass(ze),this.qtip._unbind(this.qtip.tooltip,this._ns),je.toggle(this.qtip,q),delete this.qtip.elements.overlay}}),qe=V.modal=function(t){return new C(t,t.options.show.modal)},qe.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:"undefined"==typeof t.show.modal.on&&(t.show.modal.on=T))},F.modal_zindex=F.zindex-200,qe.initialize="render",$.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},s.extend(T,F.defaults,{show:{modal:{on:q,effect:T,blur:T,stealfocus:T,escape:T}}})})}(window,document);