function injectCSS(e){calculatorTheme=e,theme.inject.color("#margins, .calculator-background",arguments[0].body.color,"#fff"),"fff"==arguments[0].body.color||"#ffffff"==arguments[0].body.color?theme.inject.borderColor("#margins","#eee"):theme.inject.borderColor("#margins",arguments[0].body.color,"#eee"),"undefined"!=typeof arguments[0].input&&(theme.inject.color("#input-container",arguments[0].input.color,"#eee"),theme.inject.color("#input-border",arguments[0].input.outlineColor,arguments[0].body.color),theme.inject.borderColor("#input-container",arguments[0].input.borderColor,arguments[0].body.color),theme.inject.textColor("#input-container, #input-container > div > span",arguments[0].input.textColor,"#000")),"undefined"!=typeof arguments[0].button&&(theme.inject.color(".button",arguments[0].button.color,"#eee"),theme.inject.hoverColor(".button",arguments[0].button.hoverColor),theme.inject.outlineColor(".button",arguments[0].body.color,"#eee"),theme.inject.textColor(".button",arguments[0].button.textColor,"#000"),theme.inject.borderWidth(".button",arguments[0].button.borderWidth,1),"undefined"!=typeof arguments[0].button.numbers&&(theme.inject.color(".number",arguments[0].button.numbers.color),theme.inject.hoverColor(".number",arguments[0].button.numbers.hoverColor),theme.inject.textColor(".number",arguments[0].button.numbers.textColor)),"undefined"!=typeof arguments[0].button.point&&(theme.inject.color("#point",arguments[0].button.point.color),theme.inject.hoverColor("#point",arguments[0].button.point.hoverColor),theme.inject.textColor("#point",arguments[0].button.point.textColor)),"undefined"!=typeof arguments[0].button.percentage&&(theme.inject.color("#percentage",arguments[0].button.percentage.color),theme.inject.hoverColor("#percentage",arguments[0].button.percentage.hoverColor),theme.inject.textColor("#percentage",arguments[0].button.percentage.textColor)),"undefined"!=typeof arguments[0].button.ce&&(theme.inject.color("#ce",arguments[0].button.ce.color),theme.inject.hoverColor("#ce",arguments[0].button.ce.hoverColor),theme.inject.textColor("#ce",arguments[0].button.ce.textColor)),"undefined"!=typeof arguments[0].button.positiveNegative&&(theme.inject.color("#positive-negative",arguments[0].button.positiveNegative.color),theme.inject.hoverColor("#positive-negative",arguments[0].button.positiveNegative.hoverColor),theme.inject.textColor("#positive-negative",arguments[0].button.positiveNegative.textColor)),"undefined"!=typeof arguments[0].button.operators&&(theme.inject.color("#plus, #subtract, #divide, #multiply",arguments[0].button.operators.color),theme.inject.hoverColor("#plus, #subtract, #divide, #multiply",arguments[0].button.operators.hoverColor),theme.inject.textColor("#plus, #subtract, #divide, #multiply",arguments[0].button.operators.textColor)),"undefined"!=typeof arguments[0].button.equal&&(theme.inject.color("#equal",arguments[0].button.equal.color),theme.inject.hoverColor("#equal",arguments[0].button.equal.hoverColor),theme.inject.textColor("#equal",arguments[0].button.equal.textColor)))}function ajaxGetFile(e,t){var n=!1;return $.ajax({url:e,async:!1,dataType:t,tryCount:0,retryLimit:15,success:function(e){n=e},error:function(){}}),n}var theme={ini:function(e){this.load(e)},load:function(e){"string"==typeof e&&(e=this.get(e)),0==e&&(localStorage.theme="google",e=this.get("google")),this.validate(e)&&injectCSS(e)},set:function(e){"string"==typeof e&&(e=this.get(e)),this.validate(e)&&(theme.update(e),injectCSS(e))},get:function(e){var t=null;if(void 0==e)for(t=new Array,data=ajaxGetFile("../resources/themes/themes-list.json","json"),i=0;i<data.length;i++)t.push(data[i].name.toLowerCase());else t=new Array,data=ajaxGetFile("../resources/themes/"+e+".json","json"),t=data;return t},getCurrent:function(){return"custom"!=localStorage.theme?localStorage.theme:$.parseJSON(localStorage.customTheme).manifest.name},save:function(e){"object"!=typeof e&&(e=JSON.parse(e)),void 0==e.manifest&&(e.manifest={}),e.manifest.version=1.1;var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8;"});void 0!=e.manifest.name&&void 0!=e.manifest.name?saveAs(t,e.manifest.name+".json"):saveAs(t,"my-theme.json")},update:function(e){localStorage.theme="custom",localStorage.customTheme=JSON.stringify(e),customCalculatorTheme=jQuery.parseJSON(localStorage.customTheme)},sort:{foward:function(e,t){return e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?!1:e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?!0:!1},reverse:function(e,t){return e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?!0:e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?!1:void 0}},reconstruct:function(){var t=[];for(i=0;i<t.length;i++)arguments[0]},validate:function(){var e=!0,t={presence:!0,format:{pattern:/^#([0-9a-f]{3}|[0-9a-f]{6})$/i}},o={format:{pattern:/^(#[0-9a-f]{3}|#[0-9a-f]{6}|\s*$)$/i}};if(e=e&&void 0==validate(arguments[0].manifest,{version:{numericality:{lessThanOrEqualTo:2}}}),e=e&&void 0==validate(arguments[0].body,{color:t}),"undefined"!=typeof arguments[0].input&&(e=e&&void 0==validate(arguments[0].input,{color:t,borderColor:t,textColor:t})),"undefined"!=typeof arguments[0].button){arguments[0].button.borderWidth=void 0==arguments[0].button.borderWidth||""==arguments[0].button.borderWidth&&0!=arguments[0].button.borderWidth?1:parseInt("0"+arguments[0].button.borderWidth),arguments[0].button.borderRadius=parseInt("0"+arguments[0].button.borderRadius),e=e&&void 0==validate(arguments[0].button,{color:t,hoverColor:t,borderColor:o,borderWidth:{presence:!0,numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:5}},textColor:t});var a=["numbers","point","ce","positiveNegative","operators","equal"];for(i=0;i<a.length;i++)"undefined"!=typeof arguments[0].button[a[i]]&&(arguments[0].button[a[i]].color,e=e&&void 0==validate(arguments[0].button[a[i]],{color:o,borderColor:o,textColor:o}))}else e=!1;return 0==e&&console.log("ERROR"),e},inject:{color:function(e,t,n){"undefined"!=typeof t&&""!==t?($(e).css({"background-color":t}),$(e).unbind("mouseout"),$(e).mouseout(function(){$(this).css({"background-color":t})})):"undefined"!=typeof n&&""!=n&&($(e).css({"background-color":n}),$(e).unbind("mouseout"),$(e).mouseout(function(){$(this).css({"background-color":n})}))},hoverColor:function(e,t,n){void 0!=t&&""!=t?($(e).unbind("mouseover"),$(e).mouseover(function(){$(this).css({"background-color":t})})):void 0!=n&&""!=n&&($(e).unbind("mouseover"),$(e).mouseover(function(){$(this).css({"background-color":n})}))},textColor:function(e,t,n){void 0!=t&&""!=t?$(e).css({color:t}):void 0!=n&&""!=n&&$(e).css({color:n})},font:function(e,t,n){$(e).css(void 0!=t&&""!=t?{"font-family":t}:{"font-family":n})},borderColor:function(e,t,n){$(e).css(void 0!=t&&""!=t?{"border-color":t}:{"border-color":n})},outlineColor:function(e,t,n){$(e).css(void 0!=t&&""!=t?{"outline-color":t}:{"outline-color":n})},borderWidth:function(e,t,n){t=parseFloat(t),n=parseFloat(n),$(e).css(void 0!=t?{"outline-offset":String(-1*(t-1)*1)+"px","outline-width":String(1*t)+"px"}:{"outline-offset":String(-1*(n-1)*1)+"px","outline-width":String(1*n)+"px"})}}};$(document).on("click",".button",function(e){var t=$(this),n=t.offset(),o=e.pageX-n.left,i=e.pageY-n.top,a=t.width(),r=t.find(".ripple");r.addClass("notransition"),r.css({top:i,left:o}),r[0].offsetHeight,r.removeClass("notransition"),t.addClass("hovered"),r.css({width:2*a,height:2*a,"margin-left":-a,"margin-top":-a}),setTimeout(function(){r.addClass("notransition"),r.attr("style",""),r[0].offsetHeight,t.removeClass("hovered"),r.removeClass("notransition")},300)});var calculatorTheme="";$(document).ready(function(){$(".button").each(function(){var e=$(this);e.append("<div class='ripple'></div>")})});
